# For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;

# Load dynamic modules. See /usr/share/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

  server {
      listen ${options['port']};
      server_name  _;
      root         /usr/share/nginx/html;

      proxy_set_header X-Real-IP  $$remote_addr;
      proxy_set_header X-Forwarded-For $$proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto http;
      proxy_set_header Host $$host;
      proxy_set_header Authorization  "";


      # tenders urls
      # Awards

      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id&document_id=$$document_id;
      }

      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id&document_id=*;
      }

      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}/complaints/{complaint_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id&complaint_id=$$complaint_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}/complaints/{complaint_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id&complaint_id=$$complaint_id&document_id=*;
      }

      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}/complaints/{complaint_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id&complaint_id=$$complaint_id;
      }

      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}/complaints
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id&complaint_id=*;
      }

      # /api/${options['api_version']}/tenders/{tender_id}/awards/{award_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=$$award_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/awards
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?award_id=*;
      }


      # Bids
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/qualification_documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/qualification_documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&qualification_document=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/qualification_documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/qualification_documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&qualification_document=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/financial_documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/financial_documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&financial_document=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/financial_documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/financial_documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&financial_document=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/eligibility_documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/eligibility_documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&eligibility_document=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/eligibility_documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/eligibility_documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&eligibility_document=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id&document_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids/{bid_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=$$bid_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/bids
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?bid_id=*;
      }


      # Cancellations
      # /api/${options['api_version']}/tenders/{tender_id}/cancellations/{cancellation_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?cancellation_id=$$cancellation_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/cancellations/{cancellation_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?cancellation_id=$$cancellation_id&document_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/cancellations/{cancellation_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?cancellation_id=$$cancellation_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/cancellations
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?cancellation_id=*;
      }


      # Complaints
      # /api/${options['api_version']}/tenders/{tender_id}/complaints/{complaint_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?complaint_id=$$complaint_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/complaints/{complaint_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?complaint_id=$$complaint_id&document_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/complaints/{complaint_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?complaint_id=$$complaint_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/complaints
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?complaint_id=*;
      }


      # Contracts
      # /api/${options['api_version']}/tenders/{tender_id}/contracts/{contract_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?contract_id=$$contract_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/contracts/{contract_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?contract_id=$$contract_id&document_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/contracts/{contract_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?contract_id=$$contract_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/contracts
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?contract_id=*;
      }


      # Documents
      # /api/${options['api_version']}/tenders/{tender_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/documents {
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?document_id=*;
      }


      # Lots
      # /api/${options['api_version']}/tenders/{tender_id}/lots/{lot_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/lots/(?<lot_id>[0-9a-zA-Z]+) {
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?lot_id=$$lot_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/lots
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/lots {
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?lot_id=*;
      }


      # Qualifications
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}/complaints/{complaint_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id&complaint_id=$$complaint_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}/complaints/{complaint_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id&complaint_id=$$complaint_id&document_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}/complaints/{complaint_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id&complaint_id=$$complaint_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}/complaints
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id&complaint_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id&document_id=$$document_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}/documents
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id&document_id=*;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications/{qualification_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=$$qualification_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/qualifications
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?qualification_id=*;
      }


      # Questions
      # /api/${options['api_version']}/tenders/{tender_id}/questions/{question_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/questions/(?<question_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?question_id=$$question_id;
      }
      # /api/${options['api_version']}/tenders/{tender_id}/questions
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+)/questions {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id?question_id=*;
      }



      # /api/${options['api_version']}/tenders/{tender_id}
      location ~^/api/${options['api_version']}/tenders/(?<tender_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/tenders/_show/show/$$tender_id;
      }

      # Tenders feed
      # /api/${options['api_version']}/tenders
      location ~^/api/${options['api_version']}/tenders {
        proxy_pass  ${options['edge_url']}/api/${options['api_version']}/tenders$$is_args$$args;
      }

      # /api/${options['api_version']}/spore
      location ~^/api/${options['api_version']}/spore {
      proxy_pass  ${options['edge_url']}/api/${options['api_version']}/spore$$is_args$$args;
      }


      # Contracts
      # /api/${options['api_version']}/contracts/{contract_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/contracts/_show/show/$$contract_id?document_id=$$document_id;
      }

      # /api/${options['api_version']}/contracts/{contract_id}/documents
      location ~^/api/${options['api_version']}/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents {
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/contracts/_show/show/$$contract_id?document_id=*;
      }

      # /api/${options['api_version']}/contracts/{contract_id}
      location ~^/api/${options['api_version']}/contracts/(?<contract_id>[0-9a-zA-Z]+){
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/contracts/_show/show/$$contract_id;
      }

      # Contracts feed
      # /api/${options['api_version']}/contracts
      location ~^/api/${options['api_version']}/contracts {
        proxy_pass  ${options['edge_url']}/api/${options['api_version']}/contracts$$is_args$$args;
      }



      # Plans
      # /api/${options['api_version']}/plans/{plan_id}/documents/{document_id}
      location ~^/api/${options['api_version']}/plans/(?<plan_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/plans/_show/show/$$plan_id?document_id=$$document_id;
      }

      # /api/${options['api_version']}/plans/{plan_id}/documents
      location ~^/api/${options['api_version']}/plans/(?<cplanid>[0-9a-zA-Z]+)/documents {
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/plans/_show/show/$$plan_id?document_id=*;
      }

      # /api/${options['api_version']}/plans/{plan_id}
      location ~^/api/${options['api_version']}/plans(?<plan_id>[0-9a-zA-Z]+){
      proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/plans/_show/show/$$plan_id;
      }

      # Plans feed
      # /api/${options['api_version']}/plans
      location ~^/api/${options['api_version']}/plans {
        proxy_pass  ${options['edge_url']}/api/${options['api_version']}/plans$$is_args$$args;
      }



      # Auctions
      # /api/${options['api_version']}/auctions/{auctions}/awards/{award_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?award_id=$$award_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/awards
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?award_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/bids/{bid_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?bid_id=$$bid_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/bids
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/bids {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?bid_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/cancellations/{cancellation_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?cancellation_id=$$cancellation_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/cancellations
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/cancellations {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?cancellation_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/complaints/{complaint_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?complaint_id=$$complaint_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/complaints
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/complaints {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?complaint_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/contracts/{contract_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?contract_id=$$contract_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/contracts
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/contracts {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?contract_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/documents/{document_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?document_id=$$document_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/documents
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/documents {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?document_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/lots/{lot_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/lots/(?<lot_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?lot_id=$$lot_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/lots
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/lots {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?lot_id=*;
      }

      # /api/${options['api_version']}/auctions/{auctions}/questions/{question_id}
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/questions/(?<question_id>[0-9a-zA-Z]+) {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?question_id=$$question_id;
      }
      # /api/${options['api_version']}/auctions/{auctions}/questions
      location ~^/api/${options['api_version']}/auctions/(?<auction_id>[0-9a-zA-Z]+)/questions {
        proxy_pass  ${options['couch_url']}/${options['couch_db']}/_design/auctions/_show/show/$$auction_id?question_id=*;
      }
  }
}
